<html>
<head>
  <title>Google Earth API - Camera/LookAt Viewer</title>
  <!-- *** Replace the key below below with your own API key, available at http://code.google.com/apis/maps/signup.html *** -->
  <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAwbkbZLyhsmTCWXbTcjbgbRSzHs7K5SvaUdm8ua-Xxy_-2dYwMxQMhnagaawTo7L1FE1-amhuQxIlXw"></script>
  <script type="text/javascript">
google.load("earth", "1");

var ge = null;

function init() {
	google.earth.createInstance("map3d", initCB, failureCB);
}

function initCB(object) {
	ge = object;
	ge.getWindow().setVisibility(true);
	google.earth.addEventListener(ge.getView(), "viewchange", eventListener);
	ge.getNavigationControl().setVisibility(ge.VISIBILITY_SHOW);
}

function failureCB(object) {
	alert('load failed');
}

function eventListener(event) {
  var camera = ge.getView().copyAsCamera(ge.ALTITUDE_RELATIVE_TO_GROUND);
	document.getElementById("id_lat_cam").innerHTML = camera.getLatitude().toFixed(5);
	document.getElementById("id_lng_cam").innerHTML = camera.getLongitude().toFixed(5);
	document.getElementById("id_alt_cam").innerHTML = camera.getAltitude().toFixed(2);
	document.getElementById("id_head_cam").innerHTML = camera.getHeading().toFixed(2);
	document.getElementById("id_tilt_cam").innerHTML = camera.getTilt().toFixed(2);
	document.getElementById("id_roll_cam").innerHTML = camera.getRoll().toFixed(2);

  var lookAt = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
	document.getElementById("id_lat_la").innerHTML = lookAt.getLatitude().toFixed(5);
	document.getElementById("id_lng_la").innerHTML = lookAt.getLongitude().toFixed(5);
	document.getElementById("id_rng_la").innerHTML = lookAt.getRange().toFixed(2);
	document.getElementById("id_alt_la").innerHTML = lookAt.getAltitude().toFixed(2);
	document.getElementById("id_head_la").innerHTML = lookAt.getHeading().toFixed(2);
	document.getElementById("id_tilt_la").innerHTML = lookAt.getTilt().toFixed(2);
}

</script>
</head>
<body onload='init()' id='body'>
  
<div id='map3d' style='height: 480px; width: 640px'></div>

<table>
	<tr>
		<th>Camera</th>
	</tr>
	<tr>
		<td>Latitude:<td>
		<td id='id_lat_cam'></td>
	</tr>
	<tr>
		<td>Longitude:<td>
		<td id='id_lng_cam'></td>
	</tr>
	<tr>
		<td>Altitude (relativeToGround):<td>
		<td id='id_alt_cam'></td>
	</tr>
	<tr>
		<td>Heading:<td>
		<td id='id_head_cam'></td>
	</tr>
	<tr>
		<td>Tilt:<td>
		<td id='id_tilt_cam'></td>
	</tr>
	<tr>
		<td>Roll:<td>
		<td id='id_roll_cam'></td>
	</tr>
	
	<tr>
		<td><br></td>
	</tr>
	
	<tr>
		<th>LookAt</th>
	</tr>
	<tr>
		<td>Latitude:<td>
		<td id='id_lat_la'></td>
	</tr>
	<tr>
		<td>Longitude:<td>
		<td id='id_lng_la'></td>
	</tr>
	<tr>
		<td>Range:<td>
		<td id='id_rng_la'></td>
	</tr>
	<tr>
		<td>Altitude (relativeToGround):<td>
		<td id='id_alt_la'></td>
	</tr>
	<tr>
		<td>Heading:<td>
		<td id='id_head_la'></td>
	</tr>
	<tr>
		<td>Tilt:<td>
		<td id='id_tilt_la'></td>
	</tr>
</table>

</body>
</html>
